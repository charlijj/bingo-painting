<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Ball Painting Challenge</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: 
                linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)),
                repeating-linear-gradient(
                    0deg,
                    #8B4513 0px,
                    #A0522D 2px,
                    #8B4513 4px
                ),
                linear-gradient(180deg, #2C1810 0%, #4A2C1A 50%, #2C1810 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #fff;
            position: relative;
            overflow-x: hidden;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(180deg, 
                rgba(255,215,0,0.15) 0%, 
                rgba(255,215,0,0.08) 50%, 
                transparent 100%
            );
            pointer-events: none;
        }
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255,215,0,0.03) 0%, transparent 30%),
                radial-gradient(circle at 80% 60%, rgba(255,215,0,0.03) 0%, transparent 30%),
                radial-gradient(circle at 50% 50%, rgba(0,0,0,0.2) 0%, transparent 50%);
            pointer-events: none;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }
        h1 {
            font-size: 3em;
            text-shadow: 
                0 0 10px rgba(255,215,0,0.5),
                0 0 20px rgba(255,215,0,0.3),
                2px 2px 4px rgba(0,0,0,0.8),
                0 0 40px rgba(255,215,0,0.2);
            margin-bottom: 10px;
            color: #FFD700;
            font-family: 'Impact', 'Arial Black', sans-serif;
            letter-spacing: 2px;
        }
        .subtitle {
            font-size: 1.2em;
            opacity: 0.95;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            color: #FFF8DC;
        }
        .container {
            background: 
                linear-gradient(135deg, rgba(139,69,19,0.4) 0%, rgba(101,67,33,0.4) 100%),
                linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.5));
            backdrop-filter: blur(5px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.6),
                inset 0 1px 0 rgba(255,255,255,0.1),
                0 0 80px rgba(255,215,0,0.1);
            max-width: 1200px;
            width: 100%;
            border: 2px solid rgba(139,69,19,0.5);
            position: relative;
            z-index: 1;
        }
        .container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                rgba(255,215,0,0.2) 0%, 
                transparent 25%, 
                transparent 75%, 
                rgba(255,215,0,0.2) 100%
            );
            border-radius: 20px;
            z-index: -1;
        }
        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }
        select, button {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        select {
            background: linear-gradient(to bottom, #FFF8DC, #F5DEB3);
            color: #333;
            border: 2px solid #8B4513;
            box-shadow: 
                0 2px 8px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.5);
        }
        button {
            background: linear-gradient(135deg, #DC143C 0%, #8B0000 100%);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
            border: 2px solid rgba(255,215,0,0.3);
            box-shadow: 
                0 4px 15px rgba(220,20,60,0.4),
                inset 0 1px 0 rgba(255,255,255,0.2),
                0 0 20px rgba(255,215,0,0.2);
        }
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 25px rgba(220,20,60,0.6),
                inset 0 1px 0 rgba(255,255,255,0.2),
                0 0 30px rgba(255,215,0,0.3);
            background: linear-gradient(135deg, #FF1744 0%, #C62828 100%);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .machine-container {
            height: 550px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            background: 
                radial-gradient(ellipse at center, rgba(255,215,0,0.05) 0%, transparent 70%),
                radial-gradient(circle at 50% 50%, rgba(0,0,0,0.3) 0%, transparent 60%);
            border-radius: 15px;
            padding: 20px;
        }
        canvas {
            border-radius: 10px;
            box-shadow: 
                0 10px 40px rgba(0,0,0,0.7),
                0 0 60px rgba(255,215,0,0.1),
                inset 0 0 20px rgba(0,0,0,0.2);
            border: 3px solid rgba(139,69,19,0.4);
        }
        .result-display {
            background: 
                linear-gradient(to bottom, #FFF8DC, #F5DEB3),
                linear-gradient(135deg, rgba(255,215,0,0.1) 0%, transparent 100%);
            color: #333;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 
                0 5px 15px rgba(0,0,0,0.4),
                inset 0 2px 5px rgba(255,215,0,0.2);
            border: 3px solid #8B4513;
        }
        .result-text {
            font-size: 2em;
            font-weight: bold;
            color: #8B0000;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(255,215,0,0.3);
        }
        .player-text {
            font-size: 1.2em;
            color: #654321;
            font-weight: 600;
        }
        .timer-section {
            background: 
                linear-gradient(to bottom, #FFF8DC, #F5DEB3),
                linear-gradient(135deg, rgba(255,215,0,0.1) 0%, transparent 100%);
            color: #333;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 
                0 5px 15px rgba(0,0,0,0.4),
                inset 0 2px 5px rgba(255,215,0,0.2);
            border: 3px solid #8B4513;
        }
        .timer-section h2 {
            color: #654321;
            text-shadow: 1px 1px 2px rgba(255,215,0,0.3);
            font-size: 1.8em;
        }
        .timer-display {
            font-size: 4em;
            font-weight: bold;
            color: #DC143C;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            text-shadow: 
                2px 2px 4px rgba(0,0,0,0.3),
                0 0 10px rgba(220,20,60,0.3);
        }
        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        .info-box {
            background: 
                linear-gradient(135deg, rgba(139,69,19,0.5) 0%, rgba(101,67,33,0.5) 100%),
                rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            border: 2px solid rgba(255,215,0,0.3);
            box-shadow: 
                0 4px 15px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }
        .info-box h3 {
            margin-bottom: 10px;
            color: #FFD700;
            text-shadow: 
                0 0 10px rgba(255,215,0,0.5),
                2px 2px 4px rgba(0,0,0,0.8);
            font-size: 1.4em;
        }
        .info-box p {
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé® Bingo Ball Painting Challenge üé®</h1>
        <p class="subtitle">Spin for your prompt, paint for 30 minutes, then switch canvases!</p>
    </div>

    <div class="container">
        <div class="controls">
            <select id="categorySelect">
                <option value="objects">Everyday Objects</option>
                <option value="animals">Animals</option>
                <option value="fantasy">Fantasy Creatures</option>
                <option value="emotions">Emotions & Concepts</option>
                <option value="places">Places & Scenes</option>
            </select>
            <button id="spinBtn" onclick="spin()">üé∞ Spin for Player 1</button>
            <button id="resetBtn" onclick="window.location.reload()">üîÑ Reset Game</button>
        </div>

        <div class="machine-container">
            <canvas id="bingoCanvas" width="600" height="500"></canvas>
        </div>

        <div class="result-display" id="result">
            <div class="result-text" id="resultText">Ready to start! Select a category and spin.</div>
            <div class="player-text" id="playerText"></div>
        </div>

        <div class="timer-section">
            <h2>‚è∞ Painting Timer</h2>
            <div class="timer-display" id="timer">30:00</div>
            <div class="timer-controls">
                <button id="startTimerBtn" onclick="startTimer()" disabled>‚ñ∂Ô∏è Start Timer</button>
                <button onclick="pauseTimer()">‚è∏Ô∏è Pause</button>
                <button onclick="resetTimer()">üîÑ Reset Timer</button>
            </div>
        </div>

        <div class="info-box">
            <h3>How to Play:</h3>
            <p>1Ô∏è‚É£ Each player spins for their painting prompt<br>
            2Ô∏è‚É£ Start the 30-minute timer and paint your subject<br>
            3Ô∏è‚É£ When time's up, SWITCH canvases!<br>
            4Ô∏è‚É£ Finish each other's paintings without revealing what it is</p>
        </div>
    </div>

    <script>
        const prompts = {
            objects: ['Coffee Mug', 'Vintage Camera', 'Umbrella', 'Old Book', 'Bicycle', 'Sunglasses', 'Clock', 'Telescope', 'Guitar', 'Teapot', 'Lighthouse', 'Hourglass'],
            animals: ['Elephant', 'Peacock', 'Octopus', 'Fox', 'Owl', 'Dolphin', 'Butterfly', 'Tiger', 'Penguin', 'Giraffe', 'Flamingo', 'Seahorse'],
            fantasy: ['Dragon', 'Phoenix', 'Mermaid', 'Unicorn', 'Griffin', 'Fairy', 'Centaur', 'Pegasus', 'Yeti', 'Sphinx', 'Kraken', 'Basilisk'],
            emotions: ['Joy', 'Serenity', 'Chaos', 'Nostalgia', 'Wonder', 'Melancholy', 'Courage', 'Mystery', 'Freedom', 'Hope', 'Solitude', 'Harmony'],
            places: ['Moonlit Beach', 'Mountain Peak', 'City Skyline', 'Forest Path', 'Desert Oasis', 'Underwater Cave', 'Space Station', 'Garden Maze', 'Ancient Ruins', 'Foggy Harbor', 'Volcano', 'Northern Lights']
        };

        const canvas = document.getElementById('bingoCanvas');
        const ctx = canvas.getContext('2d');
        
        let currentPlayer = 1;
        let timerInterval;
        let timeLeft = 1800;
        let isTimerRunning = false;
        let animationId;
        let isSpinning = false;
        let spinRotation = 0;
        let holeOpen = false;
        let selectedBall = null;

        // Physics constants
        const GRAVITY = 0.5;
        const FRICTION = 0.98;
        const RESTITUTION = 0.7;
        const CAGE_CENTER_X = 300;
        const CAGE_CENTER_Y = 200;
        const CAGE_RADIUS = 140;
        const SPIN_FORCE = 0.8;
        const SPIN_SPEED = 0.025;

        class Ball {
            constructor(x, y, color, label) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 4;
                this.vy = (Math.random() - 0.5) * 4;
                this.radius = 18;
                this.color = color;
                this.label = label;
                this.mass = 1;
            }

            update() {
                if (isSpinning) {
                    // Rotate around the cage center
                    spinRotation += SPIN_SPEED;
                    
                    // Calculate target position on the edge
                    const currentAngle = Math.atan2(this.y - CAGE_CENTER_Y, this.x - CAGE_CENTER_X);
                    const targetAngle = currentAngle + SPIN_SPEED;
                    const targetX = CAGE_CENTER_X + Math.cos(targetAngle) * (CAGE_RADIUS - this.radius - 5);
                    const targetY = CAGE_CENTER_Y + Math.sin(targetAngle) * (CAGE_RADIUS - this.radius - 5);
                    
                    // Apply force towards target position (centrifugal effect)
                    const dx = targetX - this.x;
                    const dy = targetY - this.y;
                    this.vx += dx * SPIN_FORCE;
                    this.vy += dy * SPIN_FORCE;
                    
                    // Apply tangential velocity for rotation
                    this.vx += -Math.sin(targetAngle) * 4;
                    this.vy += Math.cos(targetAngle) * 4;
                } else {
                    // Normal gravity when not spinning
                    this.vy += GRAVITY;
                }

                this.vx *= FRICTION;
                this.vy *= FRICTION;

                this.x += this.vx;
                this.y += this.vy;

                // Check if ball falls through the hole
                if (holeOpen && !selectedBall) {
                    const distToCenter = Math.sqrt(
                        Math.pow(this.x - CAGE_CENTER_X, 2) + 
                        Math.pow(this.y - CAGE_CENTER_Y, 2)
                    );
                    // Check if ball is at the bottom center (hole position)
                    if (distToCenter < this.radius + 5 && this.y >= CAGE_CENTER_Y - 10) {
                        selectedBall = this;
                        return; // Stop updating this ball
                    }
                }

                // Collision with cage boundaries
                const dx = this.x - CAGE_CENTER_X;
                const dy = this.y - CAGE_CENTER_Y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist + this.radius > CAGE_RADIUS) {
                    const angle = Math.atan2(dy, dx);
                    this.x = CAGE_CENTER_X + Math.cos(angle) * (CAGE_RADIUS - this.radius);
                    this.y = CAGE_CENTER_Y + Math.sin(angle) * (CAGE_RADIUS - this.radius);

                    const normalX = dx / dist;
                    const normalY = dy / dist;
                    const dotProduct = this.vx * normalX + this.vy * normalY;

                    this.vx = (this.vx - 2 * dotProduct * normalX) * RESTITUTION;
                    this.vy = (this.vy - 2 * dotProduct * normalY) * RESTITUTION;
                }
            }

            draw() {
                // Ball shadow
                ctx.beginPath();
                const gradient = ctx.createRadialGradient(this.x - 5, this.y - 5, 0, this.x, this.y, this.radius);
                gradient.addColorStop(0, this.color);
                gradient.addColorStop(1, this.adjustColor(this.color, -40));
                ctx.fillStyle = gradient;
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();

                // Ball highlight
                ctx.beginPath();
                const highlight = ctx.createRadialGradient(this.x - 6, this.y - 6, 0, this.x, this.y, this.radius);
                highlight.addColorStop(0, 'rgba(255,255,255,0.6)');
                highlight.addColorStop(0.3, 'rgba(255,255,255,0.2)');
                highlight.addColorStop(1, 'rgba(255,255,255,0)');
                ctx.fillStyle = highlight;
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();

                // Ball outline
                ctx.strokeStyle = 'rgba(0,0,0,0.3)';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Label
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 10px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(this.label, this.x, this.y);
            }

            adjustColor(color, percent) {
                const num = parseInt(color.replace("#",""), 16);
                const amt = Math.round(2.55 * percent);
                const R = Math.max(0, Math.min(255, (num >> 16) + amt));
                const G = Math.max(0, Math.min(255, (num >> 8 & 0x00FF) + amt));
                const B = Math.max(0, Math.min(255, (num & 0x0000FF) + amt));
                return "#" + ((R << 16) + (G << 8) + B).toString(16).padStart(6, '0');
            }
        }

        const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2', '#F8B739', '#52D681', '#E17055', '#A29BFE'];
        let balls = [];

        function initBalls() {
            balls = [];
            for (let i = 0; i < 12; i++) {
                const angle = (i / 12) * Math.PI * 2;
                const radius = 60 + Math.random() * 40;
                const x = CAGE_CENTER_X + Math.cos(angle) * radius;
                const y = CAGE_CENTER_Y + Math.sin(angle) * radius;
                balls.push(new Ball(x, y, colors[i], (i + 1).toString()));
            }
        }

        function checkBallCollisions() {
            for (let i = 0; i < balls.length; i++) {
                for (let j = i + 1; j < balls.length; j++) {
                    const ball1 = balls[i];
                    const ball2 = balls[j];
                    const dx = ball2.x - ball1.x;
                    const dy = ball2.y - ball1.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    const minDist = ball1.radius + ball2.radius;

                    if (dist < minDist) {
                        const angle = Math.atan2(dy, dx);
                        const sin = Math.sin(angle);
                        const cos = Math.cos(angle);

                        // Rotate velocities
                        const vx1 = ball1.vx * cos + ball1.vy * sin;
                        const vy1 = ball1.vy * cos - ball1.vx * sin;
                        const vx2 = ball2.vx * cos + ball2.vy * sin;
                        const vy2 = ball2.vy * cos - ball2.vx * sin;

                        // Collision reaction
                        const vx1Final = ((ball1.mass - ball2.mass) * vx1 + 2 * ball2.mass * vx2) / (ball1.mass + ball2.mass);
                        const vx2Final = ((ball2.mass - ball1.mass) * vx2 + 2 * ball1.mass * vx1) / (ball1.mass + ball2.mass);

                        // Rotate back
                        ball1.vx = vx1Final * cos - vy1 * sin;
                        ball1.vy = vy1 * cos + vx1Final * sin;
                        ball2.vx = vx2Final * cos - vy2 * sin;
                        ball2.vy = vy2 * cos + vx2Final * sin;

                        // Separate balls
                        const overlap = minDist - dist;
                        const separateX = (dx / dist) * overlap / 2;
                        const separateY = (dy / dist) * overlap / 2;
                        ball1.x -= separateX;
                        ball1.y -= separateY;
                        ball2.x += separateX;
                        ball2.y += separateY;
                    }
                }
            }
        }

        function drawMachine() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Base
            const baseGradient = ctx.createLinearGradient(0, 450, 0, 500);
            baseGradient.addColorStop(0, '#333');
            baseGradient.addColorStop(1, '#111');
            ctx.fillStyle = baseGradient;
            ctx.fillRect(100, 450, 400, 50);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 3;
            ctx.strokeRect(100, 450, 400, 50);

            // Stand
            ctx.fillStyle = '#444';
            ctx.fillRect(150, 420, 300, 30);
            ctx.strokeStyle = '#222';
            ctx.lineWidth = 2;
            ctx.strokeRect(150, 420, 300, 30);

            // Cage background
            const cageGradient = ctx.createRadialGradient(CAGE_CENTER_X - 40, CAGE_CENTER_Y - 40, 20, CAGE_CENTER_X, CAGE_CENTER_Y, CAGE_RADIUS);
            cageGradient.addColorStop(0, 'rgba(255,255,255,0.3)');
            cageGradient.addColorStop(0.5, 'rgba(255,255,255,0.1)');
            cageGradient.addColorStop(1, 'rgba(200,200,200,0.2)');
            ctx.fillStyle = cageGradient;
            ctx.beginPath();
            ctx.arc(CAGE_CENTER_X, CAGE_CENTER_Y, CAGE_RADIUS, 0, Math.PI * 2);
            ctx.fill();

            // Draw hole at bottom if open
            if (holeOpen) {
                ctx.fillStyle = '#222';
                ctx.beginPath();
                ctx.arc(CAGE_CENTER_X, CAGE_CENTER_Y, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.stroke();
            }

            // Cage wires
            ctx.strokeStyle = 'rgba(51,51,51,0.7)';
            ctx.lineWidth = 3;
            
            // Horizontal circles
            for (let i = 0; i < 5; i++) {
                ctx.beginPath();
                const r = CAGE_RADIUS * (0.3 + i * 0.175);
                ctx.arc(CAGE_CENTER_X, CAGE_CENTER_Y, r, 0, Math.PI * 2);
                ctx.stroke();
            }

            // Vertical lines
            for (let i = 0; i < 12; i++) {
                const angle = (i / 12) * Math.PI * 2;
                ctx.beginPath();
                ctx.moveTo(CAGE_CENTER_X + Math.cos(angle) * 30, CAGE_CENTER_Y + Math.sin(angle) * 30);
                ctx.lineTo(CAGE_CENTER_X + Math.cos(angle) * CAGE_RADIUS, CAGE_CENTER_Y + Math.sin(angle) * CAGE_RADIUS);
                ctx.stroke();
            }

            // Outer rim
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 8;
            ctx.beginPath();
            ctx.arc(CAGE_CENTER_X, CAGE_CENTER_Y, CAGE_RADIUS, 0, Math.PI * 2);
            ctx.stroke();

            // Update and draw balls
            balls.forEach(ball => {
                if (ball !== selectedBall) {
                    ball.update();
                }
            });
            checkBallCollisions();
            balls.forEach(ball => {
                if (ball !== selectedBall) {
                    ball.draw();
                }
            });

            // Draw selected ball falling through hole
            if (selectedBall) {
                selectedBall.y += 8;
                if (selectedBall.y < 500) {
                    selectedBall.draw();
                }
            }

            // Chute
            ctx.fillStyle = '#555';
            ctx.beginPath();
            ctx.moveTo(450, 300);
            ctx.lineTo(480, 300);
            ctx.lineTo(500, 420);
            ctx.lineTo(430, 420);
            ctx.closePath();
            ctx.fill();
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Chute opening
            ctx.fillStyle = '#222';
            ctx.fillRect(450, 300, 30, 20);

            animationId = requestAnimationFrame(drawMachine);
        }

        function spin() {
            const category = document.getElementById('categorySelect').value;
            const spinBtn = document.getElementById('spinBtn');
            
            spinBtn.disabled = true;
            isSpinning = true;
            spinRotation = 0;
            holeOpen = false;
            selectedBall = null;

            // Give balls initial velocity
            balls.forEach(ball => {
                const angle = Math.atan2(ball.y - CAGE_CENTER_Y, ball.x - CAGE_CENTER_X);
                ball.vx = -Math.sin(angle) * 5;
                ball.vy = Math.cos(angle) * 5;
            });

            // Stop spinning after 6 seconds, open hole, and let balls fall
            setTimeout(() => {
                isSpinning = false;
                holeOpen = true;
                
                // Give balls a final push as they release
                balls.forEach(ball => {
                    ball.vx *= 0.5;
                    ball.vy *= 0.5;
                });
                
                // Wait for a ball to fall through, then show result
                const checkBallInterval = setInterval(() => {
                    if (selectedBall) {
                        clearInterval(checkBallInterval);
                        
                        // Map ball label to prompt
                        const ballIndex = parseInt(selectedBall.label) - 1;
                        const categoryPrompts = prompts[category];
                        const prompt = categoryPrompts[ballIndex % categoryPrompts.length];
                        
                        setTimeout(() => {
                            document.getElementById('resultText').textContent = prompt;
                            document.getElementById('playerText').textContent = `Player ${currentPlayer}'s Prompt`;

                            if (currentPlayer === 1) {
                                currentPlayer = 2;
                                spinBtn.textContent = 'üé∞ Spin for Player 2';
                                spinBtn.disabled = false;
                            } else {
                                spinBtn.textContent = '‚úÖ Both Players Ready!';
                                document.getElementById('startTimerBtn').disabled = false;
                            }
                        }, 1000);
                    }
                }, 100);
            }, 6000);
        }

        function reset() {
            currentPlayer = 1;
            document.getElementById('spinBtn').textContent = 'üé∞ Spin for Player 1';
            document.getElementById('spinBtn').disabled = false;
            document.getElementById('resultText').textContent = 'Ready to start! Select a category and spin.';
            document.getElementById('playerText').textContent = '';
            document.getElementById('startTimerBtn').disabled = true;
            resetTimer();
            holeOpen = false;
            selectedBall = null;
            initBalls();
        }

        function startTimer() {
            if (!isTimerRunning) {
                isTimerRunning = true;
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        pauseTimer();
                        alert('‚è∞ Time\'s up! Switch canvases now!');
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
        }

        function resetTimer() {
            pauseTimer();
            timeLeft = 1800;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        initBalls();
        drawMachine();
    </script>
</body>
</html>